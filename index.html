<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
			<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
				<link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
					<link rel="stylesheet" href="stylesheets/pygment_trac.css">
						<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
						<script type="text/javascript" src="javascripts/script.js"></script>
						<script src="https://maps.googleapis.com/maps/api/js"></script>
						<title>Bikesnitch</title>
						<meta name="description" content="">
							<meta name="viewport" content="width=device-width,initial-scale=1">
								</head>
	<body>
		<div class="wrapper">
			<header>
				<!--<h1 class="title">BikeSnitch</h1>-->
				<img src="https://i.imgur.com/mMsKG9d.png" alt="BikeSnitchLogo" style="width:100%; height:100%">
			</header>
			<head>
				<style>
					#map-canvas {
						width: float;
						height: 400px;
						
					}
				</style>
				<script>
					function initialize(lat, lng)
					{
						var mapCanvas = document.getElementById('map-canvas');
						var mapOptions =
						{
							center: new google.maps.LatLng(lat, lng),
							zoom: 15,
							mapTypeId: google.maps.MapTypeId.ROADMAP
						}
						var map = new google.maps.Map(mapCanvas, mapOptions)
						
						var marker = new google.maps.Marker
						({
							position: new google.maps.LatLng(lat, lng),
							map: map,
							title: 'Your Bike'
						})
					}
				//google.maps.event.addDomListener(window, 'load', initialize);
				
					function refresh()
					{
						var lat = 33.64548239488949;
						var lng = -117.84314266406;
						getLat();
						getLng();
						initialize(lat, lng);
					}
				</script>
				
				<script>
					function popupAboutUs()
					{
						var myWindow = window.open("", "About Us", "width = 500, height = 500");
						myWindow.document.write("<h4><p>Bike thefts on university campuses occur each and every year. The number of recovered bikes remains low and stays the same from year to year. For a student commuter, having their bicycle stolen not only affects their commuting schedule but their budget as well.</p><p>As a result, BikeSnitch is a device that both student bicyclists and daily bicycle commuters can utilize. BikeSnitch will pinpoint a bike’s location and reduce the stress in the recovery and retrieval process with utilization of its GPS capability. BikeSnitch adds security assurance beyond what a chain lock provides and gives the bicycle owner piece of mind that they have the capability to locate their bicycle if it ever gets stolen.</p><p>Raul Madrigal Jr. is a computer engineer and the team captain of team DJR. He has a good understanding of embedded systems. He enjoys setting up the hardware of the embedded system and then programming the necessary components to make the system work as a whole, which is why he is working on the MCU Control Subsystem. He is determined, timely, and a hard worker and he will do all that he can to have the project done by next quarter. Juan Meza is an electrical engineer and a team member of DJR. Juan is in charge of the design of the Power Subsystem. Juan has a passion for designing low powered systems that can be powered by free energy sources. Davis Vang is a computer engineer and a team member of DJR. He has prior experience working with the Google Maps library and programming websites using Javascript and HTML. His responsibilities for the project is to manage and integrate the GPS Subsystem.</p></h4>");
					}
				</script>
				<script>
					$(function() {
					  //$.get('http://bikesnitch.github.io/gpstest/lat.txt', function(data) {
					  $.get('http://169.234.43.220/lat.txt', function(data) {
					  //$.get('http://bikesnitch.ddns.net/lat.txt', function(data) {
							// $('#text-file-container').html(data);
							lat = data;
							alert(lat);
							//initialize(40.7127, 74.0059);
							});
					  });
					  
					$(function() {
						//$.get('http://bikesnitch.github.io/gpstest/lng.txt', function(data) {
					  $.get('http://169.234.43.220/lng.txt', function(data) {
					  //$.get('http://bikesnitch.ddns.net/lng.txt', function(data) {
							// $('#text-file-container').html(data);
							lng = data;
							alert(lng);
							//initialize(40.7127, 74.0059);
							});
						});
				</script>
				<script language="javascript">
					var lat = 33.64548239488949;
					var lng = -117.84314266406;
					function check(form)
					{
						var davisID		= "davis";
						var davisPWD	= "cpe2015";
						var raulID		= "raul";
						var raulPWD		= "cpe2015";
						var juanID		= "juan";
						var juanPWD		= "ee2015";
						var defaultID	= "usertest";
						var defaultPWD	= "wordpass";
						
						if((form.userid.value == davisID && form.pswrd.value == davisPWD) ||
						   (form.userid.value == raulID && form.pswrd.value == raulPWD) ||
						   (form.userid.value == juanID && form.pswrd.value == juanPWD) ||
						   (form.userid.value == defaultID && form.pswrd.value == defaultPWD))
						{
							//alert("Hello");
							show('googleMaps');
							show('logoutButton');
							show('mapinfo-body');
							hide('loginForm');
							hide('aboutus-body');
							initialize(lat, lng);
						}
						
						else
						{
							alert("Error Password or Username is incorrect.");
						}
					}
				
					function logout()
					{
						show('loginForm');
						show('aboutus-body');
						hide('logoutButton');
						hide('googleMaps');
						hide('mapinfo-body')
					}
				
					function registerButton()
					{
						show('registerForm');
						hide('loginForm');
						hide('aboutus-body');
						hide('logoutButton');
						hide('googleMaps');
						hide('mapinfo-body')
					}
				
					function registerForm(form)
					{
						if(form.register_password.value == form.confirm_password.value)
						{
							alert("Start: FileIO");
							var file = new ActiveXObject("Scripting.FileSystemObject");
							var ots = file.OpenTextFile("/Users/Davis/Documents/BikeSnitch/foo.txt", 2, true);
							var str = "Hello World";
							
							ots.Write(str);
							ots.Close();
							ots = null;
							fso = null;
							alert("Done: FileIO");
						} else
						{
							alert("The password you enter does not match.");
						}
						
					}
				
					function hide(id)
					{
						document.getElementById(id).style.display = "none";
					}
				
					function show(id)
					{
						document.getElementById(id).style.display = "block";
					}
				</script>
			</head>
			<div id="container">
				<p class="tagline"></p>
				<div id="main" role="main">
					<div class="download-bar">
						<div class="inner" align="right">
							<button onclick ="registerButton()">Register</button>
							<button onclick ="popupAboutUs()">About Us</button>
							<button onclick ="parent.location='mailto:bikesnitch@gmail.com?subject=Bike Snitch | Contact Us'">Contact Us</button>
						</div>
						<span class="blc"></span><span class="trc"></span>
					</div>
					<article id="markdown-body">
						<h3 align=center> Welcome to BikeSnitch! </h3>
						<div id="text-file-container"></div>
					</article>
					<article id="aboutus-body">
						<div id="text-file-container"></div>
						<div>
						</div>
						<h5>
						<center>Bike theft has been a large public crime, especially on UC campuses. For our project we will be designing an onboard system that integrates Bluetooth connectivity, GPS tracking, and a renewable power source. Our project’s goal is to reduce the crime rate of stolen bicycles by preventing and locating them.</center>
						</h5>
					</article>
					<article id="loginForm">
						<h1>Login</h1>
						<form name="login">
							<label for="userid">Username: &nbsp;</label>
							<input required placeholder="Username" type="text" name="userid"/>
							<br>
							<label for="pswrd">Password: &nbsp;&nbsp;</label>
							<input required placeholder="Password" type="password" name="pswrd"/>
							</br>
							<br>
							<input type="button" onclick="check(this.form)" value="Login"/>
							<input type="reset" value="Cancel"/>
							</br>
						</form>
					</article>
					<article id="registerForm" style="display:none">
						<h1>Register</h1>
						<form name="register">
							<label>Username:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
							<input type="text" name="register_userid" id="register_userid"/>
							<br/>
							<label>Password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
							<input type="password" name="register_password" id="register_password"/>
							<br/>
							<label>Confirm Password:</label>
							<input type="password" name="confirm_password" id="confirm_password"/>
							<br/>
							<input type="button" onclick="registerForm(this.form)" name="Submit" id="Submit" value="Submit"/>
						</form>
					</article>
					<input id="logoutButton" type="button" onclick="logout()" value="Logout" style="display: none"/>
					<article id="mapinfo-body" style="display: none">
						<h3>The location of your bike:</h3>
						<!-- <input type="button" onclick="history.go(0)" value="Refresh"/> -->
					</article>
					<article id="googleMaps" style="display: none">
						<div id="map-canvas"></div>
					</article>
				</div>
			</div>
			<footer>
				<div class="owner">
					<p><div align="right">BikeSnitch © 2015</div></p>
				</div>
				<div class="creds" align = "right">
					<small>A Senior Design Project by Raul Madrigal Jr., Juan Meza, and Davis Vang</small><br>
					<small>University of California, Irvine</small>
				</div>
			</footer>
		</div>
		<div class="current-section">
			<a href="#top">Scroll to top</a>
			
			<p class="name"></p>
		</div>
	</body>
</html>
